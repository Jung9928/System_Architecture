# Reverse Proxy (리버스 프록시)

### 모식도 <br>
![img_1.png](img_1.png)

<br><br>

### 0. 웹 서비스의 전체 과정
![img_4.png](img_4.png)
![img_5.png](img_5.png)
- 일반적으로 웹 서비스는 `클라이언트 <-> 웹 <-> 웹 서버` 이렇게 3개의 영역을 관통하면서 제공됨
  - 클라이언트
    - 서비스를 이용하는 사용자로서, 웹에 접근하여 자신이 원하는 페이지, 파일을 요청 <br><br>
    
  - 웹 서버
    - 웹을 통해 전달받은 요청에 맞는 데이터를 준비해서 응답 <br><br>
  
- 위처럼 연속된 웹 서비스 절차는 모든 요청마다 발생하고 각 요청 1번에 많은 수의 세부 요청이 존재할 수 있음(ex : 1개의 페이지당 보통 십수개의 파일 요청이 발생) <br>
  -> 많은 사용자가 이용 -> 웹 서버는 동일한 절차 중복 진행 -> `매번 동일한 파일을 응답` (ex : 각 포털사이트 메인 페이지) <br>
  -> `중복되는 요청을 매번 처리 시, 많은 자원 낭비 발생` -> 그래서 등장한 것이 `프록시 서버`
  
<br><br>


### 1. 프록시(Proxy)란?
![img_6.png](img_6.png)
- `Proxy`는 `대리` 또는 `대리인`이라는 의미를 가진 단어. 
- 클라이언트와 서버 간의 통신을 중계하는 서버나 소프트웨어 -> 서버 대신 무언가를 수행하는 용도의 서버

- 클라이언트는 서버에 직접 요청을 전송하지 않고 프록시를 통해 요청을 전송
- 해당 요청을 프록시가 받아서 서버에 대신 전달 후, 받은 응답을 클라이언트에게 전송 
- `Proxy 서버`의 주된 역할은 `웹 서비스 프로그램(이하 웹서버)의 컨텐츠 로드 부하 감소`임. <br>
  즉, 웹 서버 대신에 `정적 데이터`를 제공하는 `캐시`의 역할을 수행함
  
- 프록시 서버(Proxy Server)는 `포워드 프록시(Forward Proxy)`와 `리버스 프록시(Reverse Proxy)` 두 가지 유형으로 나뉨


### 2. 포워드 프록시(Forward Proxy)란 ? 
![img_2.png](img_2.png)

- 사용자 기기와 인터넷 사이에 위치하는 서버 <br>
  좀 더, 자세히 말하자면 클라이언트 바로 뒤에 위치한 개념. <br>
  사용자는 인터넷보다 프록시 서버를 먼저 호출. <br>
  프록시 서버는 `같은 내부망`에 존재하는 사용자의 요청을 `외부 네트워크(인터넷)`으로 중계함. <br><br>

  예를 들면, 유저가 www.naver.com에 접속하려고 하면 유저 pc가 직접 연결되는게 아니라 `포워드 프록시 서버`가 요청을 받아 <br>
  www.naver.com에 연결하여 `그 결과를 유저에게 전달(Forward)`해줌. <br>
  그 결과, 서버에게 유저가 누군지 감추는 역할을 수행 (서버에서 받는 IP는 유저의 IP가 아니라 프록시 서버의 IP)

<br><br>

### 2-1. 용도
- 클라이언트 보호 (익명성)
  - 서버에서 받는 IP는 유저의 IP가 아니라, 프록시 서버의 IP이므로 유저의 IP주소와 신원을 숨길 수 있어 익명성과 개인 정보 보호 효과가 있음 <br><br>

- 캐싱
  - 유저가 동일한 컨텐츠에 대해 다시 요청을 할 경우, 프록시는 원본 서버에 요청을 전달하는 대신 캐싱된 컨텐츠를 제공. <br><br>

  - 예를 들어, 100만명의 유저가 www.naver.com에 접근한다면, 본래 웹서버는 동일한 절차를 100만회 실행해야 하지만 <br>
    정적 데이터의 경우, 유저 별 응답이 달라질 필요가 없으므로 `포워드 프록시`를 활용해 프록시 내 캐싱된 페이지를 로드함. <br>
    이를 통해, 클라이언트의 입장에선 빠르게 컨텐츠를 응답받을 수 있고 서버의 입장에선 불필요한 로드 감소로 인해 부하 완화 효과가 있음 <br><br>
  

- 특정 콘텐츠에 대한 액세스 차단
  - 액세스 제어 정책을 설정해서 특정 사이트나 컨텐츠에 대한 액세스를 제한할 수 있음 <br>
    이를 통해, 조직이나 기관에서 인터넷 사용을 관리하거나 악성 컨텐츠 필터링이 가능 <br><br>

<br>



### 3. 리버스 프록시(Reverse Proxy)란 ?
![img_3.png](img_3.png)


- 인터넷망에 있는 클라이언트가 프록시 서버를 호출하여 내부망에 있는 서버를 호출하면 `리버스 프록시`임. <br>
  즉, 리버스 프록시는 서버의 앞단에 위치하여 클라이언트 요청을 여러 대상 서버로 분산하여 전달하는 역할 수행. <br><br>




### 3-1. 용도
- 서버 보호(보안)
  - 웹 서버의 직접적인 접근을 차단 -> 보안 강화
  - 웹 서버의 IP와 명세를 숨기고 악성 공격으로부터 보호
  - 유저는 직접적으로 웹 서버의 IP를 알 수 없으므로, 보안이 다소 취약한 `HTTP 프레임워크를 숨겨` 이를 보호 <br><br>

- 부하 분산(로그 밸런싱)
  - 리버스 프록시 뒤에 여러 개의 WAS를 두어, 사용자의 요청을 분산할 수 있음 <br>
    앤드포인트(URL)마다 호출 서버를 설정할 수 잇어 역할에 따라 서버의 트래픽을 분산할 수 있음 <br>

- 정적 콘텐츠 캐싱처리
  - 자주 요청되는 컨텐츠를 저장 -> 동일한 요청에 대해 캐싱된 응답 제공 <br><br>

- 어플리케이션 관리
  - 여러 개의 서버나 어플리케이션을 하나의 도메인으로 통합 가능 <br>
    -> 다양한 어플리케이션을 단일 진입점(entry point)에서 관리할 수 있으며, URL 라우팅, SSL 인증서 관리 등을 수행 가능 <br><br>

  - 하나의 IP로 다수의 웹 서버를 동작시킬 수 있음 -> IPv4의 한정된 수량 및 가격적인 측면에서 이점

<br><br>



### 포워드 - 리버스는 역방향일까?

